"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),core=require("@material-ui/core");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw i}}return r}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var requiredValidation=function(e){return""!==e.toString().trim()},lengthValidation=function(e,t){var r="object"===_typeof(t)?{min:t.min,max:t.max,minMessage:t.minMessage?t.minMessage:"This field must have a minnimum of ".concat(t.min," characters"),maxMessage:t.maxMessage?t.maxMessage:"This field must have a maximum of ".concat(t.max," characters")}:{min:t,minMessage:"This field must have a minnimum of ".concat(t," characters")},a=e.toString().trim().length,n=!0,i=null;return a<r.min?(n=!1,i=r.minMessage):r.max&&r.max<a&&(n=!1,i=r.maxMessage),[n,i]},validateRut=function(e){var t=e.replace(/\./g,"").replace(/\-/g,"").slice(0,-1);if(t.length<7)return!1;for(var r=t.trim().split("").reverse(),a=0,n=2,i=0;i<r.length;i++)a+=parseInt(r[i])*n,n=7===n?2:n+1;var o=11*Math.trunc(a/11),l=Math.abs(a-o);return 11-l<10?11-l:11-l==11?0:"K"},rutValidation=function(e){var t=!1,r=validateRut(e);return!1!==r&&(t=r===("K"===e.slice(-1).toUpperCase()?"K":parseInt(e.slice(-1)))),t},checkValidations=function(c,e){var s=!1,f="";return Object.entries(e).map(function(e){var t=_slicedToArray(e,2),r=t[0],a=t[1];switch(r){case"required":var n=requiredValidation(c);return s=s||!n,void(f=a.message?a.message:"Required field");case"length":var i=_slicedToArray(lengthValidation(c,a),2),o=i[0],l=i[1];return s=s||!o,void(f=l);case"chileanRut":var u=rutValidation(c);s=s||!u,f=a.message?a.message:"Invalid RUT";default:return}}),{hasError:s,validationMessage:f}},rutFormatter=function(e){var t=null,r=e.replace(/\./g,"").replace(/\-/g,""),a=r.slice(0,-1),n=r.slice(-1).toUpperCase();if(0<a.length){for(var i="",o=1,l=a.length-1;0<=l;l--,o++){i=a.charAt(l)+i;o%3==0&&o<=a.length-1&&(i="."+i)}t="".concat(i,"-").concat(n)}else t=e;return t},formatValue=function(n,e){var i=n;return Object.entries(e).map(function(e){var t=_slicedToArray(e,2),r=t[0],a=t[1];switch(r){case"chileanRut":return void(a&&(i=rutFormatter(n)));default:return}}),i},defaultConfig={color:"primary",error:!1,helperText:null,id:"field",label:"",margin:"normal",name:"field",size:"small",type:"text",variant:"outlined"},Textfield=function(e){var t=e.config,r=e.validations,n=void 0===r?null:r,a=e.formatters,i=void 0===a?null:a,o=e.value,l=e.change,u=void 0===l?null:l,c=_slicedToArray(React.useState(""),2),s=c[0],f=c[1],m=_slicedToArray(React.useState(!1),2),d=m[0],v=m[1],y=_slicedToArray(React.useState(""),2),p=y[0],g=y[1];React.useEffect(function(){o&&f(o)},[o]);return React.useEffect(function(){var e,t,r,a;n&&(t=(e=checkValidations(s,n)).hasError,r=e.validationMessage,t?(v(!0),g(r)):v(!1)),i&&(a=formatValue(s,i),f(a)),u&&u()},[s]),React__default.createElement(core.TextField,_extends({},defaultConfig,t,{error:d,value:s,onChange:function(e){e.preventDefault(),f(e.target.value)},helperText:d?p:null!=t&&t.helperText?t.helperText:null}))},TemplateToRender=function(e){var t=e.element,r=e.config,a=e.validations,n=e.formatters,i=e.value,o=e.change;switch(t){case"input":default:return React__default.createElement(Textfield,{config:r,validations:a,formatters:n,value:i,change:o})}},Field=function(e){var t=e.element,r=e.config,a=e.validations,n=e.formatters,i=e.value,o=e.change;return React__default.createElement(TemplateToRender,{element:t,config:r,validations:a,formatters:n,value:i,change:o})};function FormField(e){var t=e.element,r=void 0===t?"input":t,a=e.change,n=void 0===a?null:a,i=e.value,o=void 0===i?null:i,l=e.config,u=void 0===l?null:l,c=e.validations,s=void 0===c?null:c,f=e.formatters,m=void 0===f?null:f;return React__default.createElement(Field,{element:r,config:u,validations:s,formatters:m,value:o,change:n})}exports.FormField=FormField;
//# sourceMappingURL=index.js.map
